# -*- coding: utf-8 -*-from django.core.files.storage import Storageimport uuid# 七牛云储存import qiniu.conf, qiniu.io, qiniu.rsQINIU_ACCESS_KEY = '<YOUR_APP_ACCESS_KEY>'QINIU_SECRET_KEY = '<YOUR_APP_SECRET_KEY>'QINIU_BUCKET_NAME = '<YOUR_BUCKET_NAME>'class QiniuStorage(Storage):    def __init__(self,                    folder = '',                    access_key = QINIU_ACCESS_KEY,                    secret_key = QINIU_SECRET_KEY,                    bucket_name = QINIU_BUCKET_NAME,):        qiniu.conf.ACCESS_KEY = QINIU_ACCESS_KEY        qiniu.conf.SECRET_KEY = QINIU_SECRET_KEY        self.bucket_name = bucket_name        self.folder = folder                policy = qiniu.rs.PutPolicy(self.bucket_name)        self.uptoken = policy.token()    def _save(self,name, content):                name = self.folder + uuid.uuid1().hex + name[name.rindex('.'):]        ret, err = qiniu.io.put(self.uptoken, name, content)        content.close()        if err is not None:            raise 'QiniuStorage error',err        self.url  = 'http://'+QINIU_BUCKET_NAME+'.qiniudn.com/'+name        return self.url    def exists(self, name):        return False    def listdir(self,path):        pass    def size(self,name):        return 0    def url(self, name):        return self.url